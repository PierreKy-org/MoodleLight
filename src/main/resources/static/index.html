<!DOCTYPE html>
<html>
<head>
    <title>API REST Documentation</title>
</head>
<body>
<section>
    <button type="button" class="rootpath">/api/doc</button>

    <article>
        <h1>The documentation of our API</h1>
        <p>You are here.</p>
    </article>
</section>
<section>
    <button type="button" class="rootpath">/api/auth</button>

    <article>
        <h1>/signup</h1>
        <h3>Allow the creation of a new user</h3>
        <code>curl -X POST http://localhost:8080/api/auth/signup -H 'Content-Type: application/json' -d
            '{"username":"admin","password":"abcdef1234","email":"admin@gmail.com"}'</code>
        <h3>Returns the following JSON</h3>
        <pre class="json">
        {"message":"User registered successfully!"}
    </pre>
        <h3>Or an Error if the username of email are already taken</h3>
        <pre class="json">
        {"message":"Error: Username is already taken!"}
    </pre>
        <p>It add the user to the database.</p>
    </article>

    <article>
        <h1>/signin</h1>
        <h3>Allow the user to get his Authentication token</h3>
        <code>curl -X POST http://localhost:8080/api/auth/signin -H 'Content-Type: application/json' -d
            '{"username":"admin","password":"abcdef1234"'}</code>
        <h3>Returns the following JSON</h3>
        <pre class="json">
    {   "id":2,
        "username":"admin",
        "email":"admin@gmail.com",
        "roles":["ROLE_STUDENT"],
        "accessToken":"TOKEN",
        "tokenType":"Bearer"
        }
    </pre>
        <p>It allow the user to know his access Token.</p>
    </article>

</section>

<section>
    <button type="button" class="rootpath">/api/module</button>

    <article>
        <h1>/register</h1>
        <h3>Register a user to a module</h3>
        <code>curl -X POST http://localhost:8080/api/module/register -H 'Content-Type: application/json' -d
            '{"userId":1,"moduleId":4}'</code>
        <h3>Returns the following JSON</h3>
        <pre class="json">
        {"message":"User successfully registered to module!"}
        </pre>
        <h3>Or if there is already a teacher registered to the module</h3>
        <pre class="json">
        {"message":"There is already a teacher registered to the course"}
        </pre>
        <h3>Or if the user is already registered to the module</h3>
        <pre class="json">
        {"message":"The user is already registered"}
        </pre>
        <p>It register the user to the module if the requester has the permission.</p>
    </article>

</section>

<section>
    <button type="button" class="rootpath">/api/user</button>

    <article>
        <h1>/{user_name}/id</h1>
        <h3>Return the id of the user</h3>
        <code>curl -X GET http://localhost:8080/api/user/{user_name}/id -H 'Authorization: Bearer TOKEN'</code>
        <h3>Returns the following JSON</h3>
        <pre class="json">
        {"id":1}
    </pre>
        <h3>404 if the user does not exist</h3>
    </article>

    <article>
        <h1>/{user_id}/username</h1>
        <h3>Return the username of the user</h3>
        <code>curl -X GET http://localhost:8080/api/user/{user_id}/username -H 'Authorization: Bearer TOKEN'</code>
        <h3>Returns the following JSON</h3>
        <pre class="json">
        {"username":Quentin}
    </pre>
        <h3>404 if the user does not exist</h3>
    </article>

    <article>
        <h1>/{user_id}/email</h1>
        <h3>Return the email of the user</h3>
        <code>curl -X GET http://localhost:8080/api/user/{user_id}/email -H 'Authorization: Bearer TOKEN'</code>
        <h3>Returns the following JSON</h3>
        <pre class="json">
        {"email":quentin.beauchet@unice.fr}
    </pre>
        <h3>404 if the user does not exist.</h3>
    </article>

    <article>
        <h1>/{user_id}/roles</h1>
        <h3>Return the roles of the user</h3>
        <code>curl -X GET http://localhost:8080/api/user/{user_id}/roles -H 'Authorization: Bearer TOKEN'</code>
        <h3>Returns the following JSON</h3>
        <pre class="json">
        [
            {
                "id":1,
                "name":ROLE_STUDENT
            },
            {
                "id":3,
                "name":ROLE_ADMIN
            },
            ]
    </pre>
        <h3>404 if the user does not exist.</h3>
    </article>

    <article>
        <h1>/{user_id}/modules</h1>
        <h3>Return the username of the user</h3>
        <code>curl -X GET http://localhost:8080/api/user/{user_id}/modules -H 'Authorization: Bearer TOKEN'</code>
        <h3>Returns the following JSON</h3>
        <pre class="json">
        [
            {
                "id":1,
                "name":Gestion de projet
            },
            ]
    </pre>
        <h3>404 if the user does not exist.</h3>
    </article>

</section>
</body>
<style>
    article {
    display: none;
    background-color: lightgrey;
    padding: 0.2rem 1rem 0.2rem  1rem;
    margin-bottom: 2rem;
}

code {
    padding: 0.5rem;
    background-color : white;
    border: 1px dashed black;
}

.json {
    padding: 0.5rem;
    background-color : white;
    border: 1px dashed black;
}

.rootpath {
  background-color: #777;
  color: white;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 1.5rem;
  font-weight: bold;
}




</style>

<script>
Array.from(document.getElementsByClassName("rootpath")).forEach(button =>
  button.addEventListener("click", function(event) {
    let articles = event.target.parentNode.querySelectorAll("article");
    articles.forEach(el => el.style.display = el.style.display == "none" || el.style.display == "" ? "block" : "none");
  }));
</script>
</html>